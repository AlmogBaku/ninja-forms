jQuery(document).ready(function(s){function e(e){this.upgrade=e,this.process=function(e,i,r){e="undefined"!=typeof e?e:0,total_step="undefined"!=typeof total_step?total_step:0,r="undefined"!=typeof r?r:[],console.log("Upgrade: "+this.upgrade),s.post(ajaxurl,{upgrade:this.upgrade,step:parseInt(e),total_steps:parseInt(i),args:r,action:"nf_upgrade_handler"},function(e){var i=s("#nf_upgrade_"+n.upgrade);try{e=s.parseJSON(e)}catch(r){return i.find(".spinner").css("display","none").css("visibility","hidden"),i.find(".dashicons-no").css("display","block"),i.find(".nf-upgrade-handler__errors__text").html("Bad Response :'(<br/>"+r+"<br />"+e),void i.find(".nf-upgrade-handler__errors").slideDown()}if(console.log("DEBUG: NF_UpgradeHandler step response: "),console.log(e),void 0==e)return i.find(".spinner").css("display","none").css("visibility","hidden"),i.find(".dashicons-no").css("display","block"),i.find(".nf-upgrade-handler__errors__text").html("Empty Response :'("),void i.find(".nf-upgrade-handler__errors").slideDown();if(e.errors){i.find(".spinner").css("display","none").css("visibility","hidden"),i.find(".dashicons-no").css("display","block");var d="";return s.each(e.errors,function(s,e){d=d+"["+s+"] "+e+"<br />"}),i.find(".nf-upgrade-handler__errors__text").html("Processing Error :'(<br />"+d),i.find(".nf-upgrade-handler__errors").slideDown(),void s("#progressbar_"+e.upgrade).slideUp()}s("#progressbar_"+e.upgrade).progressbar({value:100*(e.step/e.total_steps)});return i.find(".spinner").css("display","block").css("visibility","visible"),i.find(".dashicons-no").css("display","none"),i.find(".inside").slideDown(),void 0!=e.complete?(i.find(".inside").slideUp(),i.find(".spinner").css("display","none").css("visibility","hidden"),i.find(".dashicons-yes").css("display","block"),void 0!=e.nextUpgrade?(n.upgrade=e.nextUpgrade,s("#nf_upgrade_"+n.upgrade).find(".spinner").css("display","block").css("visibility","visible"),s("#nf_upgrade_"+n.upgrade).find(".inside").slideDown(),void n.process()):void console.log('DEBUG: NF_UpgradeHandler says "It is finished!"')):void n.process(e.step,e.total_steps,e.args)}).fail(function(){alert("error")})}}if("undefined"!=typeof nfUpgradeHandler){console.log("DEBUG: NF_UpgradeHandler first upgrades is "+nfUpgradeHandler.upgrade);var n=new e(nfUpgradeHandler.upgrade);s(".progressbar").progressbar({value:0});var i=s("#nf_upgrade_"+n.upgrade);i.find(".spinner").css("display","block").css("visibility","visible"),i.find(".dashicons-no").css("display","none"),i.find(".inside").slideDown(),n.process()}else document.location.href="admin.php?page=ninja-forms"});